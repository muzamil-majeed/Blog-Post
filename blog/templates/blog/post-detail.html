{% extends "base.html" %}
{% load static %}



{% block title %}
    {{post.title}}
{% endblock %}




{% block css_files %}
    <link rel="stylesheet" href="{% static 'blog/post-detail.css'%}?v=2">
    
{% endblock %}

{% block content %}
    {% if comment_form.errors %}
    <div id="error-box">
        <h2>Your Comment is not saved</h2>
        <p>Please fix your error</p>
        <a href="#comment-form">FIX</a>

    </div>
    {% endif %}
    <section id="summary">
        <h2>{{post.titlle}}</h2>

        <div>
            {% for tag in post_tag %}
                <span class="tag">{{ tag.caption }}</span>
            {% endfor %}
        </div>

        <article>
            <img src="{{ post.image.url }}" alt="Post Title">
            <address>By <a href="mailto:{{post.author.email}}">{{post.author}}</a></address>
            <div>
                Last Updated
                <time>
                    {{ post.date|date:'d m y'}}
                </time>
            </div>
        </article>
    </section>

    <main>
        {{ post.content| linebreaks }}       
    </main>

    <section id="comments">
        <ul>
            {% for comment in comments %}
                <li>
                    <h3>{{ comment.user_name }}</h3>
                    <p> {{comment.text | linebreaks }}</p>

                </li>
            {% endfor %}
        </ul>

    </section>

    <section id="comment-form">
        <h2>Your Comment</h2>
        <form action = "{% url 'post-detail-page' post.slug %}" method="post">
            {% csrf_token %}
            {% for fields in comment_form %}
                <div class="form-control {% if fields.error %}invalid{% endif %}">
                    {{ fields.label_tag }}
                    {{ fields }}
                    {{ fields.errors }}

                </div>  
            {% endfor %}       
            <button>Save Comment</button>
        </form>
    <section>

{% endblock %}